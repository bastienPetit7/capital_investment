{% extends "admin/base_admin.html.twig" %}

{% block body %}
    <div class="container-fluid py-4">
        <div class="page-header min-height-300 border-radius-xl mt-4" style="background-image: url('{{ asset('theme/assets/img/curved-images/curved14.jpg') }}'); background-position-y: 50%;">
            <span class="mask bg-gradient-info opacity-6"></span>
        </div>
        <div class="card card-body blur shadow-blur mx-4 mt-n6 overflow-hidden">
            <div class="row gx-4">
                <div class="col-auto">
                    <div class="avatar avatar-xl position-relative">
                        <img src="{{asset('theme/assets/mes_images/logo_capital_investment.svg')}}" alt="profile_image" class="w-100 border-radius-lg shadow-sm">
                    </div>
                </div>
                <div class="col-auto my-auto">
                    <div class="h-100">
                        <h5 class="mb-1">
                            {{ investor.user.name }}
                        </h5>
                        <p class="mb-0 font-weight-bold text-sm">
                            Investor
                        </p>
                    </div>
                </div>

                {% include "admin/shared/_topbar_investor_profile.html.twig" %}
                
            </div>
        </div>
    </div>
    <div class="container-fluid py-4">
        <div class="row mt-3">
            {% include "shared/_messages_flash.html.twig" %}
            <div class="col-12">
                <div class="card mb-4">
                    <div class="card-header pb-0 p-3">
                        <h6 class="mb-1">Files</h6>
                        <p class="text-sm">List and Form</p>
                    </div>
                    <div class="card-body p-3">
                        <div class="row">
                            <div class="col-lg-9 col-xl-9 col-md-6 mb-xl-0 mb-4">

                                    {% if documents | length > 0 %}
                                    <div class="card">
                                        <div class="table-responsive">
                                        <table class="table align-items-center mb-0">
                                            <thead>
                                            <tr>
                                                <th class="text-uppercase text-secondary text-xxs font-weight-bolder opacity-7">Type</th>
                                                <th class="text-uppercase text-secondary text-xxs font-weight-bolder opacity-7 ps-2">Name</th>
                                                <th class="text-uppercase text-secondary text-xxs font-weight-bolder opacity-7 ps-2">Date</th>
                                                <th class="text-center text-uppercase text-secondary text-xxs font-weight-bolder opacity-7">Action</th>
                                            </tr>
                                            </thead>
                                            <tbody>
                                                {% for document in documents %}
                                                    <tr>
                                                        <td>
                                                            <p class="text-sm text-secondary mb-0">{{ document.type }}</p>
                                                        </td>
                                                        <td>
                                                            <p class="text-sm text-secondary mb-0">{{ document.fileName }}</p>
                                                        </td>
                                                        <td>
                                                            <p class="text-sm text-secondary mb-0">{{ document.createdAt | date('d-m-Y') }}</p>
                                                        </td>
                                                        <td class="align-middle text-center ">
                                                            <a href="{{ path('admin_investor_profile_download_file',{'id': investor.id,'documentId': document.id}) }}" class="btn btn-dark mb-0"><i class="fas fa-cloud-download-alt"></i> Download</a>
                                                        </td>
                                                    </tr>
                                                {% endfor %}
                                            </tbody>
                                        </table>
                                    </div>
                                    </div>
                                    {% else %}
                                        <p>There is no file uploaded yet.</p>
                                    {% endif %}

                            </div>
                            <div class="col-lg-3 -col-xl-3 col-md-6 mb-xl-0 mb-4">
                                <div class="card h-100 card-plain border">
                                    <div class="card-body d-flex flex-column justify-content-center text-center">
                                        {{ form_start(form) }}

                                        {{ form_widget(form) }}
                                        <button type="submit" class="btn btn-info">Upload</button>
                                        {{ form_end(form) }}
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
{% endblock %}