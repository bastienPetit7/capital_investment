{% extends "dashboard/investor/base_investor.html.twig" %}


{% block body %}

    <div class="container-fluid py-4">

        
            
        <div class="row">
            {% include "shared/_messages_flash.html.twig" %}

            <div class="col-12">
                <div class="card">
                    <h3 class="card-title p-4"> Year 2022 </h3>
                    <div class="card-body">
                        <div class="table-responsive">
                            <table class="table table-bordered" >
                                <thead class="thead-light">
                                <tr>
                                    <th class="text-uppercase text-secondary  font-weight-bolder opacity-7">{{ initialAmount | priceInEuros }}</th>
                                    <th class="text-uppercase text-secondary  font-weight-bolder opacity-7">EVOLUTION</th>
                                    <th class="text-uppercase text-secondary font-weight-bolder opacity-7">AMOUNT INTEREST</th>
                                    <th class="text-uppercase text-secondary  font-weight-bolder opacity-7">% INTEREST RATES</th>
                                </tr>
                                </thead>
                                <tbody>

                                <tr>
                                    <td class="text-sm font-weight-normal">JANUARY</td>
                                    {% if reportingMovementRepository.findMovementPerMonthAndYearAndReporting(reporting,'January',year) %}
                                        <td class="text-sm font-weight-normal">{{ reportingMovementRepository.findMovementPerMonthAndYearAndReporting(reporting,'January',year).walletAmountAfterMovement | priceInEuros }}</td>
                                        <td class="text-sm font-weight-normal">{{ reportingMovementRepository.findMovementPerMonthAndYearAndReporting(reporting,'January',year).interestEarn.amount | priceInEuros }}</td>
                                        <td class="text-sm font-weight-normal">{{ reportingMovementRepository.findMovementPerMonthAndYearAndReporting(reporting,'January',year).interestRates }}</td>
                                    {% else %}
                                        <td class="text-sm font-weight-normal">-</td>
                                        <td class="text-sm font-weight-normal">-</td>
                                        <td class="text-sm font-weight-normal">-</td>
                                    {% endif %}
                                </tr>
                                <tr>
                                    <td class="text-sm font-weight-normal">FEBRUARY</td>
                                    {% if reportingMovementRepository.findMovementPerMonthAndYearAndReporting(reporting,'February',year) %}
                                        <td class="text-sm font-weight-normal">{{ reportingMovementRepository.findMovementPerMonthAndYearAndReporting(reporting,'February',year).walletAmountAfterMovement | priceInEuros }}</td>
                                        <td class="text-sm font-weight-normal">{{ reportingMovementRepository.findMovementPerMonthAndYearAndReporting(reporting,'February',year).interestEarn.amount | priceInEuros }}</td>
                                        <td class="text-sm font-weight-normal">{{ reportingMovementRepository.findMovementPerMonthAndYearAndReporting(reporting,'February',year).interestRates }}</td>
                                    {% else %}
                                        <td class="text-sm font-weight-normal">-</td>
                                        <td class="text-sm font-weight-normal">-</td>
                                        <td class="text-sm font-weight-normal">-</td>
                                    {% endif %}
                                </tr>
                                <tr>
                                    <td class="text-sm font-weight-normal">MARCH</td>
                                    {% if reportingMovementRepository.findMovementPerMonthAndYearAndReporting(reporting,'March',year) %}
                                        <td class="text-sm font-weight-normal">{{ reportingMovementRepository.findMovementPerMonthAndYearAndReporting(reporting,'March',year).walletAmountAfterMovement | priceInEuros }}</td>
                                        <td class="text-sm font-weight-normal">{{ reportingMovementRepository.findMovementPerMonthAndYearAndReporting(reporting,'March',year).interestEarn.amount | priceInEuros }}</td>
                                        <td class="text-sm font-weight-normal">{{ reportingMovementRepository.findMovementPerMonthAndYearAndReporting(reporting,'March',year).interestRates }}</td>
                                    {% else %}
                                        <td class="text-sm font-weight-normal">-</td>
                                        <td class="text-sm font-weight-normal">-</td>
                                        <td class="text-sm font-weight-normal">-</td>
                                    {% endif %}
                                </tr>
                                <tr>
                                    <td class="text-sm font-weight-normal">APRIL</td>
                                    {% if reportingMovementRepository.findMovementPerMonthAndYearAndReporting(reporting,'April',year) %}
                                        <td class="text-sm font-weight-normal">{{ reportingMovementRepository.findMovementPerMonthAndYearAndReporting(reporting,'April',year).walletAmountAfterMovement | priceInEuros }}</td>
                                        <td class="text-sm font-weight-normal">{{ reportingMovementRepository.findMovementPerMonthAndYearAndReporting(reporting,'April',year).interestEarn.amount | priceInEuros }}</td>
                                        <td class="text-sm font-weight-normal">{{ reportingMovementRepository.findMovementPerMonthAndYearAndReporting(reporting,'April',year).interestRates }}</td>
                                    {% else %}
                                        <td class="text-sm font-weight-normal">-</td>
                                        <td class="text-sm font-weight-normal">-</td>
                                        <td class="text-sm font-weight-normal">-</td>
                                    {% endif %}
                                </tr>
                                <tr>
                                    <td class="text-sm font-weight-normal">MAY</td>
                                    {% if reportingMovementRepository.findMovementPerMonthAndYearAndReporting(reporting,'May',year) %}
                                        <td class="text-sm font-weight-normal">{{ reportingMovementRepository.findMovementPerMonthAndYearAndReporting(reporting,'May',year).walletAmountAfterMovement | priceInEuros }}</td>
                                        <td class="text-sm font-weight-normal">{{ reportingMovementRepository.findMovementPerMonthAndYearAndReporting(reporting,'May',year).interestEarn.amount | priceInEuros }}</td>
                                        <td class="text-sm font-weight-normal">{{ reportingMovementRepository.findMovementPerMonthAndYearAndReporting(reporting,'May',year).interestRates }}</td>
                                    {% else %}
                                        <td class="text-sm font-weight-normal">-</td>
                                        <td class="text-sm font-weight-normal">-</td>
                                        <td class="text-sm font-weight-normal">-</td>
                                    {% endif %}
                                </tr>
                                <tr>
                                    <td class="text-sm font-weight-normal">JUNE</td>
                                    {% if reportingMovementRepository.findMovementPerMonthAndYearAndReporting(reporting,'June',year) %}
                                        <td class="text-sm font-weight-normal">{{ reportingMovementRepository.findMovementPerMonthAndYearAndReporting(reporting,'June',year).walletAmountAfterMovement | priceInEuros }}</td>
                                        <td class="text-sm font-weight-normal">{{ reportingMovementRepository.findMovementPerMonthAndYearAndReporting(reporting,'June',year).interestEarn.amount | priceInEuros }}</td>
                                        <td class="text-sm font-weight-normal">{{ reportingMovementRepository.findMovementPerMonthAndYearAndReporting(reporting,'June',year).interestRates }}</td>
                                    {% else %}
                                        <td class="text-sm font-weight-normal">-</td>
                                        <td class="text-sm font-weight-normal">-</td>
                                        <td class="text-sm font-weight-normal">-</td>
                                    {% endif %}
                                </tr>
                                <tr>
                                    <td class="text-sm font-weight-normal">JULY</td>
                                    {% if reportingMovementRepository.findMovementPerMonthAndYearAndReporting(reporting,'July',year) %}
                                        <td class="text-sm font-weight-normal">{{ reportingMovementRepository.findMovementPerMonthAndYearAndReporting(reporting,'July',year).walletAmountAfterMovement | priceInEuros }}</td>
                                        <td class="text-sm font-weight-normal">{{ reportingMovementRepository.findMovementPerMonthAndYearAndReporting(reporting,'July',year).interestEarn.amount | priceInEuros }}</td>
                                        <td class="text-sm font-weight-normal">{{ reportingMovementRepository.findMovementPerMonthAndYearAndReporting(reporting,'July',year).interestRates }}</td>
                                    {% else %}
                                        <td class="text-sm font-weight-normal">-</td>
                                        <td class="text-sm font-weight-normal">-</td>
                                        <td class="text-sm font-weight-normal">-</td>
                                    {% endif %}
                                </tr>
                                <tr>
                                    <td class="text-sm font-weight-normal">AUGUST</td>
                                    {% if reportingMovementRepository.findMovementPerMonthAndYearAndReporting(reporting,'August',year) %}
                                        <td class="text-sm font-weight-normal">{{ reportingMovementRepository.findMovementPerMonthAndYearAndReporting(reporting,'August',year).walletAmountAfterMovement | priceInEuros }}</td>
                                        <td class="text-sm font-weight-normal">{{ reportingMovementRepository.findMovementPerMonthAndYearAndReporting(reporting,'August',year).interestEarn.amount | priceInEuros }}</td>
                                        <td class="text-sm font-weight-normal">{{ reportingMovementRepository.findMovementPerMonthAndYearAndReporting(reporting,'August',year).interestRates }}</td>
                                    {% else %}
                                        <td class="text-sm font-weight-normal">-</td>
                                        <td class="text-sm font-weight-normal">-</td>
                                        <td class="text-sm font-weight-normal">-</td>
                                    {% endif %}
                                </tr>
                                <tr>
                                    <td class="text-sm font-weight-normal">SEPTEMBER</td>
                                    {% if reportingMovementRepository.findMovementPerMonthAndYearAndReporting(reporting,'September',year) %}
                                        <td class="text-sm font-weight-normal">{{ reportingMovementRepository.findMovementPerMonthAndYearAndReporting(reporting,'September',year).walletAmountAfterMovement | priceInEuros }}</td>
                                        <td class="text-sm font-weight-normal">{{ reportingMovementRepository.findMovementPerMonthAndYearAndReporting(reporting,'September',year).interestEarn.amount | priceInEuros }}</td>
                                        <td class="text-sm font-weight-normal">{{ reportingMovementRepository.findMovementPerMonthAndYearAndReporting(reporting,'September',year).interestRates }}</td>
                                    {% else %}
                                        <td class="text-sm font-weight-normal">-</td>
                                        <td class="text-sm font-weight-normal">-</td>
                                        <td class="text-sm font-weight-normal">-</td>
                                    {% endif %}
                                </tr>
                                <tr>
                                    <td class="text-sm font-weight-normal">OCTOBER</td>
                                    {% if reportingMovementRepository.findMovementPerMonthAndYearAndReporting(reporting,'October',year) %}
                                        <td class="text-sm font-weight-normal">{{ reportingMovementRepository.findMovementPerMonthAndYearAndReporting(reporting,'October',year).walletAmountAfterMovement | priceInEuros }}</td>
                                        <td class="text-sm font-weight-normal">{{ reportingMovementRepository.findMovementPerMonthAndYearAndReporting(reporting,'October',year).interestEarn.amount | priceInEuros }}</td>
                                        <td class="text-sm font-weight-normal">{{ reportingMovementRepository.findMovementPerMonthAndYearAndReporting(reporting,'October',year).interestRates }}</td>
                                    {% else %}
                                        <td class="text-sm font-weight-normal">-</td>
                                        <td class="text-sm font-weight-normal">-</td>
                                        <td class="text-sm font-weight-normal">-</td>
                                    {% endif %}
                                </tr>
                                <tr>
                                    <td class="text-sm font-weight-normal">NOVEMBER</td>
                                    {% if reportingMovementRepository.findMovementPerMonthAndYearAndReporting(reporting,'November',year) %}
                                        <td class="text-sm font-weight-normal">{{ reportingMovementRepository.findMovementPerMonthAndYearAndReporting(reporting,'November',year).walletAmountAfterMovement | priceInEuros }}</td>
                                        <td class="text-sm font-weight-normal">{{ reportingMovementRepository.findMovementPerMonthAndYearAndReporting(reporting,'November',year).interestEarn.amount | priceInEuros }}</td>
                                        <td class="text-sm font-weight-normal">{{ reportingMovementRepository.findMovementPerMonthAndYearAndReporting(reporting,'November',year).interestRates }}</td>
                                    {% else %}
                                        <td class="text-sm font-weight-normal">-</td>
                                        <td class="text-sm font-weight-normal">-</td>
                                        <td class="text-sm font-weight-normal">-</td>
                                    {% endif %}
                                </tr>

                                <tr>
                                    <td class="text-sm font-weight-normal">DECEMBER</td>
                                    {% if reportingMovementRepository.findMovementPerMonthAndYearAndReporting(reporting,'December',year) %}
                                        <td class="text-sm font-weight-normal">{{ reportingMovementRepository.findMovementPerMonthAndYearAndReporting(reporting,'December',year).walletAmountAfterMovement | priceInEuros }}</td>
                                        <td class="text-sm font-weight-normal">{{ reportingMovementRepository.findMovementPerMonthAndYearAndReporting(reporting,'December',year).interestEarn.amount | priceInEuros }}</td>
                                        <td class="text-sm font-weight-normal">{{ reportingMovementRepository.findMovementPerMonthAndYearAndReporting(reporting,'December',year).interestRates }}</td>
                                    {% else %}
                                        <td class="text-sm font-weight-normal">-</td>
                                        <td class="text-sm font-weight-normal">-</td>
                                        <td class="text-sm font-weight-normal">-</td>
                                    {% endif %}
                                </tr>
                                <tr>

                                </tr>

                                </tbody>
                            </table>
                        </div>
                    </div>


                </div>
            </div>

            <div class="col-12 mt-3">
                <div class="card">
                    <h3 class="card-title p-4"> Capital Evolution </h3>
                    <div class="card-body">
                        {{ render_chart(chartBar) }}
                    </div>
                </div>
            </div>

            <div class="col-12 mt-3">
                <div class="card">
                    <h3 class="card-title p-4"> {{ investor.user.name }}'s reporting last 10 movements </h3>
                    <div class="card-body">
                         <div class="table-responsive">
                            <table class="table table-flush" id="datatable-basic">
                                <thead class="thead-light">
                                <tr>
                                    <th class="text-uppercase text-secondary text-xxs font-weight-bolder opacity-7">Date</th>
                                    <th class="text-uppercase text-secondary text-xxs font-weight-bolder opacity-7">Name</th>
                                    <th class="text-uppercase text-secondary text-xxs font-weight-bolder opacity-7">Amount</th>
                                    <th class="text-uppercase text-secondary text-xxs font-weight-bolder opacity-7">Wallet</th>
                                </tr>
                                </thead>
                                <tbody>
                                {% for movement in lastMovements %}
                                    <tr>
                                        <td class="text-sm font-weight-normal">{{ movement.createdAt | date('M-d-Y') }}</td>
                                        <td class="text-sm font-weight-normal">
                                            {% if movement.cashIn is not same as null %}
                                                <span class="text-info">DEPOSIT</span>
                                            {% elseif movement.cashOut is not same as null %}
                                                <span class="text-warning">WITHDRAWAL</span>
                                            {% elseif movement.interestEarn is not same as null %}
                                                <span class="text-success">EARNING</span>
                                            {% endif %}
                                        </td>
                                        <td class="text-sm font-weight-normal">
                                            {% if movement.cashIn is not same as null %}
                                                <span class="text-info"><i class="fas fa-plus-circle"></i> {{ movement.cashIn.amount | priceInEuros }}</span>
                                            {% elseif movement.cashOut is not same as null %}
                                                <span class="text-warning"><i class="fas fa-minus-circle"></i> {{ movement.cashOut.amount | priceInEuros }}</span>
                                            {% elseif movement.interestEarn is not same as null %}
                                                <span class="text-success"><i class="fas fa-plus-circle"></i>    {{ movement.interestEarn.amount | priceInEuros }}</span>
                                            {% endif %}
                                        </td>
                                        <td class="text-sm font-weight-normal"><strong>{{ movement.walletAmountAfterMovement | priceInEuros }}</strong></td>
                                    </tr>
                                {% endfor %}
                                </tbody>
                            </table>
                        </div>
                    </div>

                
                </div>
            </div>

            <div class="col-12 mt-3">
                <div class="card">
                    <h3 class="card-title p-4"> All Reporting movements chart </h3>
                    <div class="card-body">
                        {{ render_chart(chart) }}
                    </div>
                </div>
            </div>
       
    </div>


{% endblock %}